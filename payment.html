<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ˜ê°•ì‹ ì²­ - MCSELLER</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        .progress-steps { display: flex; justify-content: center; margin: 30px 0; }
        .step { flex: 1; text-align: center; padding: 15px; border-bottom: 3px solid #ddd; position: relative; }
        .step.active { border-color: #0066cc; color: #0066cc; font-weight: bold; }
        .step.completed { border-color: #28a745; color: #28a745; }
        .urgency-banner { background: linear-gradient(45deg, #ff4757, #ff6b7a); color: white; padding: 15px; border-radius: 8px; margin: 20px 0; text-align: center; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.8; } }
        .trust-badges { display: flex; gap: 15px; margin: 15px 0; font-size: 14px; flex-wrap: wrap; }
        .trust-badge { display: flex; align-items: center; gap: 5px; }
        .payment-btn { background: linear-gradient(135deg, #0066cc, #004499); border: none; padding: 16px; border-radius: 8px; font-size: 18px; font-weight: bold; transition: all 0.3s; box-shadow: 0 4px 15px rgba(0,102,204,0.3); }
        .payment-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,102,204,0.4); }
        .payment-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
        .countdown { font-size: 20px; font-weight: bold; color: #ff4757; }
        .stock-counter { background: #fff3cd; border: 1px solid #ffeaa7; padding: 10px; border-radius: 5px; margin: 15px 0; }
        .cart-item { border: 1px solid #dee2e6; padding: 15px; border-radius: 8px; margin: 10px 0; }
        .recommendation { border: 1px solid #e3f2fd; background: #f8f9ff; padding: 15px; border-radius: 8px; margin: 15px 0; }
        .loading-spinner { border: 2px solid #f3f3f3; border-top: 2px solid #0066cc; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; display: inline-block; margin-right: 10px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-light">
    <div class="container py-4">
        <!-- ì§„í–‰ë¥  í‘œì‹œ -->
        <div class="progress-steps">
            <div class="step completed">ìˆ˜ê°•ì‹ ì²­</div>
            <div class="step active">ê²°ì œ</div>
            <div class="step">ë°”ë¡œì‹œì²­í•˜ê¸°</div>
        </div>

        <div class="row justify-content-center">
            <div class="col-lg-8">
                <!-- ê¸´ê¸‰ì„± ë°°ë„ˆ -->
                <div class="urgency-banner">
                    ğŸš¨ <strong id="discount-timer">24:00:00</strong> í›„ í• ì¸ ì¢…ë£Œ! ì„ ì°©ìˆœ <span id="stock-left">47</span>ëª… í•œì •
                </div>

                <div class="card shadow">
                    <div class="card-body">
                        <!-- ìƒí’ˆ ì •ë³´ -->
                        <div id="product-info" class="mb-4">
                            <h4 id="product-title">ë¡œë”©ì¤‘...</h4>
                            <p class="text-muted">ê°•ì‚¬: MCSELLER ëŒ€í‘œ (å‰ ì˜¨ë¼ì¸ ë§ˆì¼€íŒ… ì „ë¬¸ê°€)</p>
                            <div class="h4 text-primary" id="product-price">â‚©0</div>
                        </div>

                        <!-- ì‹ ë¢° ìš”ì†Œ -->
                        <div class="trust-badges">
                            <div class="trust-badge"><i class="fas fa-shield-alt text-success"></i> 7ì¼ ë‚´ 100% í™˜ë¶ˆ</div>
                            <div class="trust-badge"><i class="fas fa-users text-info"></i> 1,200+ ìˆ˜ê°•ìƒ</div>
                            <div class="trust-badge"><i class="fas fa-star text-warning"></i> í‰ì  4.9/5</div>
                        </div>

                        <!-- ì‹¤ì‹œê°„ ì¬ê³  -->
                        <div class="stock-counter">
                            <i class="fas fa-fire text-danger"></i> <strong>ì‹¤ì‹œê°„ ìˆ˜ê°•ìƒ:</strong> <span id="current-students">1,247ëª…</span> | 
                            <strong>ë‚¨ì€ ìë¦¬:</strong> <span id="stock-left-detail" class="text-danger">13ì„</span>
                        </div>

                        <!-- ì¥ë°”êµ¬ë‹ˆ ìƒí’ˆë“¤ -->
                        <div id="cart-section" class="mb-4">
                            <h5><i class="fas fa-shopping-cart"></i> ìˆ˜ê°• ê³¼ì •</h5>
                            <div id="cart-items"></div>
                        </div>

                        <!-- ì¶”ì²œ ìƒí’ˆ -->
                        <div id="recommendations" class="recommendation">
                            <h6><i class="fas fa-star"></i> í•¨ê»˜ ìˆ˜ê°•í•˜ë©´ ì¢‹ì€ ê³¼ì •</h6>
                            <div id="recommended-items"></div>
                        </div>

                        <!-- í• ì¸ì½”ë“œ -->
                        <div class="mb-3">
                            <label class="form-label">í• ì¸ì½”ë“œ</label>
                            <div class="input-group">
                                <input type="text" id="discount-code" class="form-control" placeholder="í• ì¸ì½”ë“œ ì…ë ¥">
                                <button class="btn btn-outline-secondary" onclick="applyDiscount()">ì ìš©</button>
                            </div>
                            <div id="discount-msg" class="mt-1"></div>
                        </div>

                        <!-- ì ë¦½ê¸ˆ -->
                        <div class="mb-3">
                            <label class="form-label">ì ë¦½ê¸ˆ ì‚¬ìš©</label>
                            <div class="input-group">
                                <input type="number" id="points" class="form-control" placeholder="0" min="0">
                                <span class="input-group-text">ì›</span>
                                <button class="btn btn-outline-secondary" onclick="useAllPoints()">ì „ì•¡ì‚¬ìš©</button>
                            </div>
                            <small class="text-muted">ë³´ìœ : <span id="user-points">0</span>ì›</small>
                            <div id="points-msg" class="mt-1"></div>
                        </div>

                        <!-- ê²°ì œ ê¸ˆì•¡ -->
                        <div class="mb-4 p-3 bg-light rounded">
                            <div class="d-flex justify-content-between">
                                <span>ì›ê°€:</span>
                                <span id="original-price">â‚©0</span>
                            </div>
                            <div class="d-flex justify-content-between text-danger">
                                <span>í• ì¸:</span>
                                <span id="discount-amount">-â‚©0</span>
                            </div>
                            <div class="d-flex justify-content-between text-danger">
                                <span>ì ë¦½ê¸ˆ:</span>
                                <span id="points-amount">-â‚©0</span>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between h4">
                                <span>ìµœì¢… ê²°ì œê¸ˆì•¡:</span>
                                <span id="final-amount" class="text-primary">â‚©0</span>
                            </div>
                        </div>

                        <!-- ê²°ì œ ë°©ë²• -->
                        <div class="mb-4">
                            <label class="form-label">ê²°ì œ ë°©ë²•</label>
                            <div class="row g-2">
                                <div class="col-6">
                                    <input type="radio" class="btn-check" name="payment-method" id="card" value="card" checked>
                                    <label class="btn btn-outline-primary w-100" for="card"><i class="fas fa-credit-card"></i> ì¹´ë“œ</label>
                                </div>
                                <div class="col-6">
                                    <input type="radio" class="btn-check" name="payment-method" id="kakaopay" value="kakaopay">
                                    <label class="btn btn-outline-warning w-100" for="kakaopay"><i class="fas fa-comment"></i> ì¹´ì¹´ì˜¤í˜ì´</label>
                                </div>
                                <div class="col-6">
                                    <input type="radio" class="btn-check" name="payment-method" id="bank" value="bank">
                                    <label class="btn btn-outline-success w-100" for="bank"><i class="fas fa-university"></i> ê³„ì¢Œì´ì²´</label>
                                </div>
                                <div class="col-6">
                                    <input type="radio" class="btn-check" name="payment-method" id="phone" value="phone">
                                    <label class="btn btn-outline-info w-100" for="phone"><i class="fas fa-mobile-alt"></i> íœ´ëŒ€í°</label>
                                </div>
                            </div>
                        </div>

                        <!-- ê²°ì œ ë²„íŠ¼ -->
                        <button id="pay-btn" class="btn payment-btn w-100" onclick="processPay()">
                            <i class="fas fa-lock"></i> ì•ˆì „í•˜ê²Œ ìˆ˜ê°• ì‹ ì²­í•˜ê¸°
                        </button>
                        
                        <!-- ì˜¤ë¥˜ ë©”ì‹œì§€ -->
                        <div id="error-message" class="alert alert-danger mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/supabase-client.js"></script>
    <script src="js/payment-simple.js"></script>
</body>
</html>