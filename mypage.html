<!doctype html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            http-equiv="Cache-Control"
            content="no-cache, no-store, must-revalidate"
        />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />
        <title>마이페이지 - MCSELLER</title>

        <!-- PWA Meta Tags -->
        <meta name="theme-color" content="#ff9900" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-title" content="MCSELLER" />
        <link rel="manifest" href="/manifest.json" />
        <link
            rel="apple-touch-icon"
            href="https://via.placeholder.com/180x180/ff9900/ffffff?text=MC"
        />

        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
            rel="stylesheet"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;900&display=swap"
            rel="stylesheet"
        />
        <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

        <style>
            /* MCSELLER MyPage Theme */
            :root {
                --primary-gradient: linear-gradient(
                    135deg,
                    #111111 0%,
                    #23272f 100%
                );
                --accent-gradient: linear-gradient(90deg, #ff9900, #ffe259);
                --success-gradient: linear-gradient(90deg, #28a745, #34d058);
                --glass-gradient: linear-gradient(
                    135deg,
                    rgba(255, 255, 255, 0.1) 0%,
                    rgba(255, 255, 255, 0.05) 100%
                );
                --text-light: #e0e0e0;
                --text-muted: #b5b5b5;
                --white: #ffffff;
                --dark: #111111;
                --border-color: rgba(255, 153, 0, 0.2);
                --shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            }

            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: "Noto Sans KR", sans-serif;
                background: var(--primary-gradient);
                color: var(--text-light);
                line-height: 1.6;
                min-height: 100vh;
                overflow-x: hidden;
                opacity: 0;
                transition: opacity 0.3s ease;
            }
            
            /* 초기 로딩 상태 */
            .loading-screen {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: var(--primary-gradient);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                opacity: 1;
                transition: opacity 0.5s ease;
            }
            
            .loading-screen.hidden {
                opacity: 0;
                pointer-events: none;
            }

            /* Animated Background */
            body::before {
                content: "";
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: radial-gradient(
                        circle at 25% 30%,
                        rgba(255, 153, 0, 0.06) 0%,
                        transparent 50%
                    ),
                    radial-gradient(
                        circle at 75% 70%,
                        rgba(255, 226, 89, 0.04) 0%,
                        transparent 50%
                    ),
                    radial-gradient(
                        circle at 50% 50%,
                        rgba(255, 153, 0, 0.02) 0%,
                        transparent 50%
                    );
                animation: backgroundFloat 25s ease-in-out infinite;
                z-index: -1;
            }

            @keyframes backgroundFloat {
                0%,
                100% {
                    transform: translate(0, 0) rotate(0deg);
                }
                33% {
                    transform: translate(-30px, 20px) rotate(120deg);
                }
                66% {
                    transform: translate(20px, -30px) rotate(240deg);
                }
            }

            /* Navigation */
            .navbar {
                background: rgba(17, 17, 17, 0.95) !important;
                backdrop-filter: blur(15px);
                border-bottom: 2px solid var(--border-color);
                box-shadow: 0 4px 20px rgba(255, 153, 0, 0.2);
                padding: 15px 0;
            }

            .navbar-brand {
                color: var(--white) !important;
                font-weight: 800;
                font-size: 1.3rem;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
            }

            .navbar-brand:hover {
                color: #ff9900 !important;
                transform: translateX(-5px);
            }

            .navbar-brand i {
                font-size: 1.1rem;
                transition: all 0.3s ease;
            }

            .navbar-brand:hover i {
                transform: translateX(-3px);
            }

            .btn-outline-light {
                border: 2px solid rgba(255, 153, 0, 0.8);
                color: #ff9900;
                background: transparent;
                font-weight: 600;
                padding: 8px 20px;
                border-radius: 25px;
                transition: all 0.3s ease;
            }

            .btn-outline-light:hover {
                background: var(--accent-gradient);
                color: var(--dark);
                border-color: #ff9900;
                transform: translateY(-2px);
                box-shadow: 0 8px 20px rgba(255, 153, 0, 0.3);
            }

            /* Container & Layout */
            .container {
                max-width: 1200px;
            }

            /* Page Header */
            .page-header {
                background: var(--glass-gradient);
                border: 2px solid var(--border-color);
                border-radius: 20px;
                padding: 30px;
                margin: 30px 0;
                backdrop-filter: blur(20px);
                box-shadow: var(--shadow);
                position: relative;
                overflow: hidden;
            }

            .page-header::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 3px;
                background: var(--accent-gradient);
                border-radius: 20px 20px 0 0;
            }

            .page-header h2 {
                color: var(--white);
                font-weight: 800;
                margin: 0;
                display: flex;
                align-items: center;
                gap: 15px;
                font-size: 2rem;
            }

            .page-header h2 i {
                color: #ff9900;
                font-size: 1.8rem;
            }

            /* Cards */
            .card {
                background: var(--glass-gradient);
                border: 1px solid var(--border-color);
                border-radius: 20px;
                backdrop-filter: blur(20px);
                box-shadow: var(--shadow);
                transition: all 0.3s ease;
                overflow: hidden;
                margin-bottom: 30px;
            }

            .card:hover {
                transform: translateY(-8px);
                box-shadow: 0 25px 70px rgba(255, 153, 0, 0.2);
            }

            .card-header {
                background: rgba(255, 153, 0, 0.1);
                border-bottom: 1px solid var(--border-color);
                padding: 20px 25px;
                border-radius: 20px 20px 0 0;
            }

            .card-header h5 {
                color: var(--white);
                font-weight: 700;
                margin: 0;
                display: flex;
                align-items: center;
                gap: 12px;
                font-size: 1.3rem;
            }

            .card-header h5 i {
                color: #ff9900;
                font-size: 1.2rem;
            }

            .card-body {
                padding: 25px;
                color: var(--text-light);
            }

            /* User Info Styling */
            .user-info-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 15px 0;
                border-bottom: 1px solid rgba(255, 153, 0, 0.1);
                transition: all 0.3s ease;
            }

            .user-info-item:last-child {
                border-bottom: none;
            }

            .user-info-item:hover {
                background: rgba(255, 153, 0, 0.05);
                margin: 0 -25px;
                padding: 15px 25px;
                border-radius: 10px;
            }

            .user-info-label {
                font-weight: 600;
                color: var(--text-light);
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .user-info-label i {
                color: #ff9900;
                font-size: 1.1rem;
                min-width: 20px;
            }

            .user-info-value {
                font-weight: 700;
                color: var(--white);
            }

            .text-primary {
                background: var(--accent-gradient);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                font-weight: 800;
            }

            /* Course Cards */
            .course-card {
                background: rgba(255, 255, 255, 0.05);
                border: 2px solid rgba(255, 153, 0, 0.2);
                border-radius: 15px;
                padding: 20px;
                margin-bottom: 20px;
                transition: all 0.3s ease;
                position: relative;
                overflow: hidden;
            }

            .course-card::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 3px;
                background: var(--accent-gradient);
                border-radius: 15px 15px 0 0;
            }

            .course-card:hover {
                transform: translateY(-5px);
                border-color: #ff9900;
                box-shadow: 0 15px 35px rgba(255, 153, 0, 0.25);
            }

            .course-title {
                color: var(--white);
                font-weight: 700;
                margin-bottom: 10px;
                font-size: 1.2rem;
            }

            .course-meta {
                color: var(--text-muted);
                font-size: 0.9rem;
                margin-bottom: 15px;
                display: flex;
                align-items: center;
                gap: 15px;
            }

            .course-type {
                display: inline-flex;
                align-items: center;
                gap: 5px;
                background: rgba(255, 153, 0, 0.1);
                border: 1px solid var(--border-color);
                padding: 4px 10px;
                border-radius: 15px;
                font-weight: 600;
                font-size: 0.8rem;
            }

            .course-type.ebook {
                background: rgba(23, 162, 184, 0.1);
                border-color: rgba(23, 162, 184, 0.3);
                color: #17a2b8;
            }

            .course-type.lecture {
                background: rgba(40, 167, 69, 0.1);
                border-color: rgba(40, 167, 69, 0.3);
                color: #28a745;
            }

            .progress-info {
                display: flex;
                align-items: center;
                gap: 8px;
                color: var(--text-muted);
            }

            .progress-bar-container {
                flex: 1;
                height: 6px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 10px;
                overflow: hidden;
                margin: 0 10px;
            }

            .progress-bar {
                height: 100%;
                background: var(--accent-gradient);
                border-radius: 10px;
                transition: width 0.3s ease;
            }

            /* Buttons */
            .btn-primary {
                background: var(--accent-gradient);
                border: none;
                color: var(--dark);
                font-weight: 700;
                padding: 10px 20px;
                border-radius: 25px;
                transition: all 0.3s ease;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                font-size: 0.9rem;
            }

            .btn-primary:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 20px rgba(255, 153, 0, 0.4);
                color: var(--dark);
            }

            .btn-outline-primary {
                border: 2px solid #ff9900;
                color: #ff9900;
                background: transparent;
                font-weight: 600;
                padding: 12px 25px;
                border-radius: 25px;
                transition: all 0.3s ease;
            }

            .btn-outline-primary:hover {
                background: var(--accent-gradient);
                color: var(--dark);
                border-color: #ff9900;
                transform: translateY(-2px);
                box-shadow: 0 8px 20px rgba(255, 153, 0, 0.3);
            }

            .btn-sm {
                padding: 8px 16px;
                font-size: 0.85rem;
            }

            /* Empty State */
            .empty-state {
                text-align: center;
                padding: 60px 20px;
                color: var(--text-muted);
            }

            .empty-state i {
                font-size: 4rem;
                color: rgba(255, 153, 0, 0.3);
                margin-bottom: 20px;
            }

            .empty-state h5 {
                color: var(--text-light);
                margin-bottom: 10px;
            }

            /* Stats Cards */
            .stats-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin-bottom: 30px;
            }

            .stat-card {
                background: var(--glass-gradient);
                border: 1px solid var(--border-color);
                border-radius: 15px;
                padding: 25px;
                text-align: center;
                backdrop-filter: blur(10px);
                transition: all 0.3s ease;
            }

            .stat-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 15px 30px rgba(255, 153, 0, 0.15);
            }

            .stat-icon {
                width: 60px;
                height: 60px;
                background: var(--accent-gradient);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 0 auto 15px;
                font-size: 1.5rem;
                color: var(--dark);
            }

            .stat-number {
                font-size: 2rem;
                font-weight: 900;
                color: var(--white);
                margin-bottom: 5px;
            }

            .stat-label {
                color: var(--text-muted);
                font-size: 0.9rem;
                font-weight: 500;
            }

            /* Quick Actions */
            .quick-actions {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 15px;
                margin: 30px 0;
            }

            .quick-action {
                display: flex;
                align-items: center;
                gap: 15px;
                padding: 20px;
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid var(--border-color);
                border-radius: 12px;
                color: var(--text-light);
                text-decoration: none;
                transition: all 0.3s ease;
            }

            .quick-action:hover {
                background: rgba(255, 153, 0, 0.1);
                border-color: #ff9900;
                color: var(--white);
                transform: translateY(-3px);
                box-shadow: 0 10px 25px rgba(255, 153, 0, 0.2);
            }

            .quick-action-icon {
                width: 50px;
                height: 50px;
                background: var(--accent-gradient);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                color: var(--dark);
                font-size: 1.2rem;
            }

            /* Responsive Design */
            @media (max-width: 768px) {
                .page-header {
                    padding: 20px;
                    margin: 20px 0;
                }

                .page-header h2 {
                    font-size: 1.5rem;
                }

                .card-body {
                    padding: 20px;
                }

                .course-card {
                    padding: 15px;
                }

                .stats-grid {
                    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                    gap: 15px;
                }

                .stat-card {
                    padding: 20px 15px;
                }

                .stat-number {
                    font-size: 1.5rem;
                }

                .quick-actions {
                    grid-template-columns: 1fr;
                }

                .user-info-item {
                    flex-direction: column;
                    align-items: flex-start;
                    gap: 5px;
                }

                .navbar-brand {
                    font-size: 1.1rem;
                }

                .btn-outline-light {
                    padding: 6px 15px;
                    font-size: 0.9rem;
                }
            }

            /* Loading Animation */
            .loading-skeleton {
                background: linear-gradient(
                    90deg,
                    rgba(255, 255, 255, 0.05) 0%,
                    rgba(255, 255, 255, 0.1) 50%,
                    rgba(255, 255, 255, 0.05) 100%
                );
                background-size: 200px 100%;
                animation: skeleton-loading 1.5s infinite;
            }

            @keyframes skeleton-loading {
                0% {
                    background-position: -200px 0;
                }
                100% {
                    background-position: calc(200px + 100%) 0;
                }
            }

            /* Achievement Badges */
            .achievement-badge {
                display: inline-flex;
                align-items: center;
                gap: 5px;
                background: var(--success-gradient);
                color: white;
                padding: 4px 8px;
                border-radius: 12px;
                font-size: 0.75rem;
                font-weight: 600;
                margin-left: 10px;
            }

            /* Floating Action Button */
            .fab {
                position: fixed;
                bottom: 30px;
                right: 30px;
                width: 60px;
                height: 60px;
                background: var(--accent-gradient);
                border: none;
                border-radius: 50%;
                color: var(--dark);
                font-size: 1.5rem;
                box-shadow: 0 8px 25px rgba(255, 153, 0, 0.4);
                transition: all 0.3s ease;
                z-index: 1000;
            }

            .fab:hover {
                transform: scale(1.1) translateY(-3px);
                box-shadow: 0 12px 35px rgba(255, 153, 0, 0.5);
                color: var(--dark);
            }

            /* Enhanced Animations */
            .slide-in {
                animation: slideInUp 0.6s ease-out;
            }

            @keyframes slideInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .fade-in {
                animation: fadeIn 0.8s ease-out;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }

            /* Tooltip */
            .tooltip-custom {
                position: relative;
            }

            .tooltip-custom::after {
                content: attr(data-tooltip);
                position: absolute;
                bottom: 100%;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(17, 17, 17, 0.9);
                color: white;
                padding: 8px 12px;
                border-radius: 6px;
                font-size: 0.8rem;
                white-space: nowrap;
                opacity: 0;
                pointer-events: none;
                transition: opacity 0.3s;
                z-index: 1000;
            }

            .tooltip-custom:hover::after {
                opacity: 1;
            }
        </style>
    </head>
    <body>
        <!-- 네비게이션 -->
        <nav class="navbar navbar-dark">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <i class="fas fa-arrow-left"></i>
                    MCSELLER
                </a>
                <button class="btn btn-outline-light btn-sm" onclick="logout()">
                    <i class="fas fa-sign-out-alt me-1"></i>
                    로그아웃
                </button>
            </div>
        </nav>

        <div class="container py-4">
            <!-- Page Header -->
            <div class="page-header slide-in">
                <h2>
                    <i class="fas fa-user-circle"></i>
                    마이페이지
                </h2>
            </div>

            <!-- User Stats -->
            <div class="stats-grid slide-in">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="stat-number" id="total-courses">3</div>
                    <div class="stat-label">수강 중인 강의</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="stat-number" id="avg-progress">0%</div>
                    <div class="stat-label">평균 진행률</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="stat-number" id="user-points-stat">5,000</div>
                    <div class="stat-label">보유 적립금</div>
                </div>
            </div>

            <!-- 사용자 정보 -->
            <div class="card fade-in">
                <div class="card-header">
                    <h5>
                        <i class="fas fa-info-circle"></i>
                        내 정보
                    </h5>
                </div>
                <div class="card-body">
                    <div class="user-info-item">
                        <div class="user-info-label">
                            <i class="fas fa-envelope"></i>
                            이메일
                        </div>
                        <div class="user-info-value" id="user-email">
                            user@test.com
                        </div>
                    </div>
                    <div class="user-info-item">
                        <div class="user-info-label">
                            <i class="fas fa-calendar-alt"></i>
                            가입일
                        </div>
                        <div class="user-info-value" id="join-date">
                            2025-06-28
                        </div>
                    </div>
                    <div class="user-info-item">
                        <div class="user-info-label">
                            <i class="fas fa-wallet"></i>
                            적립금
                        </div>
                        <div
                            class="user-info-value text-primary"
                            id="user-points"
                        >
                            5,000원
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions fade-in">
                <a href="index.html#courses" class="quick-action">
                    <div class="quick-action-icon">
                        <i class="fas fa-plus"></i>
                    </div>
                    <div>
                        <div class="fw-bold">새 강의 둘러보기</div>
                        <small class="text-muted"
                            >더 많은 강의를 찾아보세요</small
                        >
                    </div>
                </a>
                <a href="#" class="quick-action">
                    <div class="quick-action-icon">
                        <i class="fas fa-download"></i>
                    </div>
                    <div>
                        <div class="fw-bold">모바일 앱 다운로드</div>
                        <small class="text-muted"
                            >언제 어디서나 학습하세요</small
                        >
                    </div>
                </a>
            </div>

            <!-- 구매한 강의/전자책 -->
            <div class="card fade-in">
                <div class="card-header">
                    <h5>
                        <i class="fas fa-graduation-cap"></i>
                        내 강의 & 전자책
                        <span class="achievement-badge">
                            <i class="fas fa-fire"></i>
                            학습 중
                        </span>
                    </h5>
                </div>
                <div class="card-body">
                    <div id="my-courses">
                        <div class="row">
                            <div class="col-lg-6 mb-4">
                                <div class="course-card">
                                    <div class="course-title">
                                        온라인 수익화 전략서 1탄
                                    </div>
                                    <div class="course-meta">
                                        <span class="course-type ebook">
                                            <i class="fas fa-book"></i>
                                            전자책
                                        </span>
                                        <div class="progress-info">
                                            <i class="fas fa-chart-pie"></i>
                                            <div class="progress-bar-container">
                                                <div
                                                    class="progress-bar"
                                                    style="width: 0%"
                                                ></div>
                                            </div>
                                            <span>0%</span>
                                        </div>
                                    </div>
                                    <a
                                        href="ebook-viewer.html?id=ebook1"
                                        class="btn btn-primary btn-sm"
                                    >
                                        <i class="fas fa-book-open me-1"></i
                                        >읽기 시작
                                    </a>
                                </div>
                            </div>
                            <div class="col-lg-6 mb-4">
                                <div class="course-card">
                                    <div class="course-title">
                                        AI 마스터 실전 과정
                                    </div>
                                    <div class="course-meta">
                                        <span class="course-type lecture">
                                            <i class="fas fa-play-circle"></i>
                                            강의
                                        </span>
                                        <div class="progress-info">
                                            <i class="fas fa-chart-pie"></i>
                                            <div class="progress-bar-container">
                                                <div
                                                    class="progress-bar"
                                                    style="width: 0%"
                                                ></div>
                                            </div>
                                            <span>0%</span>
                                        </div>
                                    </div>
                                    <a
                                        href="video-viewer.html?id=ai-master"
                                        class="btn btn-primary btn-sm"
                                    >
                                        <i class="fas fa-play me-1"></i>시청하기
                                    </a>
                                </div>
                            </div>
                            <div class="col-lg-6 mb-4">
                                <div class="course-card">
                                    <div class="course-title">
                                        실전 수익화 가이드북 2탄
                                    </div>
                                    <div class="course-meta">
                                        <span class="course-type ebook">
                                            <i class="fas fa-book"></i>
                                            전자책
                                        </span>
                                        <div class="progress-info">
                                            <i class="fas fa-chart-pie"></i>
                                            <div class="progress-bar-container">
                                                <div
                                                    class="progress-bar"
                                                    style="width: 0%"
                                                ></div>
                                            </div>
                                            <span>0%</span>
                                        </div>
                                    </div>
                                    <a
                                        href="ebook-viewer.html?id=ebook2"
                                        class="btn btn-primary btn-sm"
                                    >
                                        <i class="fas fa-book-open me-1"></i
                                        >읽기 시작
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <a
                            href="index.html#courses"
                            class="btn btn-outline-primary"
                        >
                            <i class="fas fa-plus me-2"></i>더 많은 강의 보기
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Floating Action Button -->
        <button
            class="fab tooltip-custom"
            data-tooltip="새 강의 추천"
            onclick="window.location.href='index.html#courses'"
        >
            <i class="fas fa-plus"></i>
        </button>

        <script src="js/env-loader.js"></script>
        <script src="js/supabase-client-prod.js"></script>
        <script src="js/mobile-utils.js"></script>
    <script src="js/content-access.js"></script>
    <script src="js/payapp-integration.js"></script>
    <script src="js/mypage-prod.js"></script>
        <!-- protect-page.js 제거: mypage-prod.js에서 인증 처리하므로 중복 방지 -->

        <script>
            // Enhanced MyPage functionality
            document.addEventListener("DOMContentLoaded", function () {
                // Initialize animations with staggered timing
                const initializeAnimations = () => {
                    const elements = document.querySelectorAll(
                        ".slide-in, .fade-in",
                    );
                    elements.forEach((element, index) => {
                        element.style.animationDelay = `${index * 0.1}s`;
                    });
                };

                // Update progress bars with animation
                const animateProgressBars = () => {
                    const progressBars =
                        document.querySelectorAll(".progress-bar");
                    progressBars.forEach((bar, index) => {
                        const progress = parseInt(bar.style.width) || 0;
                        bar.style.width = "0%";

                        setTimeout(
                            () => {
                                bar.style.transition = "width 1s ease-out";
                                bar.style.width = `${progress}%`;
                            },
                            500 + index * 200,
                        );
                    });
                };

                // Enhanced course card interactions
                const enhanceCourseCards = () => {
                    const courseCards =
                        document.querySelectorAll(".course-card");

                    courseCards.forEach((card) => {
                        const button = card.querySelector(".btn");
                        const progressBar = card.querySelector(".progress-bar");
                        const progressText = card.querySelector(
                            ".progress-info span",
                        );

                        // Add hover effects
                        card.addEventListener("mouseenter", function () {
                            this.style.transform =
                                "translateY(-8px) scale(1.02)";

                            if (button) {
                                button.style.transform = "translateY(-2px)";
                                button.style.boxShadow =
                                    "0 8px 20px rgba(255, 153, 0, 0.4)";
                            }
                        });

                        card.addEventListener("mouseleave", function () {
                            this.style.transform = "translateY(0) scale(1)";

                            if (button) {
                                button.style.transform = "translateY(0)";
                                button.style.boxShadow = "none";
                            }
                        });

                        // Add click tracking
                        if (button) {
                            button.addEventListener("click", function (e) {
                                // Add ripple effect
                                const ripple = document.createElement("span");
                                const rect = this.getBoundingClientRect();
                                const size = Math.max(rect.width, rect.height);
                                const x = e.clientX - rect.left - size / 2;
                                const y = e.clientY - rect.top - size / 2;

                                ripple.style.cssText = `
                                position: absolute;
                                width: ${size}px;
                                height: ${size}px;
                                left: ${x}px;
                                top: ${y}px;
                                background: rgba(255, 255, 255, 0.3);
                                border-radius: 50%;
                                transform: scale(0);
                                animation: ripple 0.6s linear;
                                pointer-events: none;
                            `;

                                this.style.position = "relative";
                                this.style.overflow = "hidden";
                                this.appendChild(ripple);

                                setTimeout(() => ripple.remove(), 600);

                                // Track course access
                                console.log("Course accessed:", this.href);
                            });
                        }
                    });
                };

                // Real-time stats updates
                const updateStats = () => {
                    const totalCoursesEl =
                        document.getElementById("total-courses");
                    const avgProgressEl =
                        document.getElementById("avg-progress");
                    const userPointsStatEl =
                        document.getElementById("user-points-stat");

                    // Simulate real-time data (replace with actual API calls)
                    const courses = document.querySelectorAll(".course-card");
                    const totalCourses = courses.length;

                    // Calculate average progress
                    let totalProgress = 0;
                    courses.forEach((course) => {
                        const progressText = course.querySelector(
                            ".progress-info span",
                        );
                        if (progressText) {
                            totalProgress +=
                                parseInt(progressText.textContent) || 0;
                        }
                    });
                    const avgProgress =
                        totalCourses > 0
                            ? Math.round(totalProgress / totalCourses)
                            : 0;

                    // Animate number changes
                    if (totalCoursesEl)
                        animateNumber(totalCoursesEl, totalCourses);
                    if (avgProgressEl)
                        animateNumber(avgProgressEl, avgProgress, "%");
                    if (userPointsStatEl) animateNumber(userPointsStatEl, 5000);
                };

                // Number animation utility
                const animateNumber = (element, targetValue, suffix = "") => {
                    const startValue = parseInt(element.textContent) || 0;
                    const duration = 1000;
                    const startTime = performance.now();

                    const updateNumber = (currentTime) => {
                        const elapsed = currentTime - startTime;
                        const progress = Math.min(elapsed / duration, 1);

                        // Easing function (ease-out)
                        const easeOut = 1 - Math.pow(1 - progress, 3);
                        const currentValue = Math.round(
                            startValue + (targetValue - startValue) * easeOut,
                        );

                        element.textContent = `${currentValue.toLocaleString()}${suffix}`;

                        if (progress < 1) {
                            requestAnimationFrame(updateNumber);
                        }
                    };

                    requestAnimationFrame(updateNumber);
                };

                // Enhanced logout function
                window.logout = function () {
                    const button = event.target;
                    const originalText = button.innerHTML;

                    // Show loading state
                    button.innerHTML =
                        '<i class="fas fa-spinner fa-spin me-1"></i>로그아웃 중...';
                    button.disabled = true;

                    // Add confirmation
                    if (confirm("정말 로그아웃하시겠습니까?")) {
                        // Simulate logout process
                        setTimeout(() => {
                            // Add fade out effect
                            document.body.style.transition =
                                "opacity 0.5s ease";
                            document.body.style.opacity = "0";

                            setTimeout(() => {
                                // Redirect to home page
                                window.location.href = "index.html";
                            }, 500);
                        }, 1000);
                    } else {
                        // Restore button
                        button.innerHTML = originalText;
                        button.disabled = false;
                    }
                };

                // Enhanced user info display
                const enhanceUserInfo = () => {
                    const userInfoItems =
                        document.querySelectorAll(".user-info-item");

                    userInfoItems.forEach((item) => {
                        item.addEventListener("click", function () {
                            // Add click feedback
                            this.style.transform = "scale(0.98)";
                            setTimeout(() => {
                                this.style.transform = "scale(1)";
                            }, 150);

                            // Copy to clipboard for email
                            const label =
                                this.querySelector(
                                    ".user-info-label",
                                ).textContent.trim();
                            const value =
                                this.querySelector(
                                    ".user-info-value",
                                ).textContent.trim();

                            if (label === "이메일") {
                                navigator.clipboard
                                    .writeText(
                                        value.replace("이메일", "").trim(),
                                    )
                                    .then(() => {
                                        showNotification(
                                            "이메일이 클립보드에 복사되었습니다!",
                                            "success",
                                        );
                                    });
                            }
                        });
                    });
                };

                // Notification system
                const showNotification = (
                    message,
                    type = "info",
                    duration = 3000,
                ) => {
                    // Remove existing notifications
                    const existingNotifications = document.querySelectorAll(
                        ".notification-toast",
                    );
                    existingNotifications.forEach((notification) =>
                        notification.remove(),
                    );

                    const notification = document.createElement("div");
                    notification.className =
                        "notification-toast position-fixed";
                    notification.style.cssText = `
                    top: 80px;
                    right: 20px;
                    z-index: 9999;
                    max-width: 350px;
                    padding: 15px 20px;
                    border-radius: 12px;
                    font-weight: 600;
                    backdrop-filter: blur(15px);
                    animation: slideInRight 0.5s ease-out;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                `;

                    const typeStyles = {
                        success:
                            "background: linear-gradient(135deg, rgba(40, 167, 69, 0.9), rgba(52, 208, 88, 0.8)); color: white; border: 1px solid rgba(40, 167, 69, 0.5);",
                        error: "background: linear-gradient(135deg, rgba(220, 53, 69, 0.9), rgba(245, 101, 101, 0.8)); color: white; border: 1px solid rgba(220, 53, 69, 0.5);",
                        warning:
                            "background: linear-gradient(135deg, rgba(255, 193, 7, 0.9), rgba(255, 213, 79, 0.8)); color: #111; border: 1px solid rgba(255, 193, 7, 0.5);",
                        info: "background: linear-gradient(135deg, rgba(23, 162, 184, 0.9), rgba(56, 178, 172, 0.8)); color: white; border: 1px solid rgba(23, 162, 184, 0.5);",
                    };

                    notification.style.cssText +=
                        typeStyles[type] || typeStyles.info;
                    notification.innerHTML = `
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-${type === "success" ? "check-circle" : type === "error" ? "exclamation-circle" : type === "warning" ? "exclamation-triangle" : "info-circle"} me-2"></i>
                            <span>${message}</span>
                        </div>
                        <button class="btn-close btn-close-white ms-2" onclick="this.parentElement.parentElement.remove()"></button>
                    </div>
                `;

                    document.body.appendChild(notification);

                    // Auto remove
                    setTimeout(() => {
                        if (notification.parentElement) {
                            notification.style.animation =
                                "slideOutRight 0.5s ease-in";
                            setTimeout(() => notification.remove(), 500);
                        }
                    }, duration);
                };

                // Enhanced FAB functionality
                const enhanceFAB = () => {
                    const fab = document.querySelector(".fab");
                    let isScrolled = false;

                    // Hide/show FAB based on scroll
                    window.addEventListener("scroll", () => {
                        const scrollTop =
                            window.pageYOffset ||
                            document.documentElement.scrollTop;

                        if (scrollTop > 200 && !isScrolled) {
                            isScrolled = true;
                            fab.style.transform = "scale(1.2)";
                            setTimeout(() => {
                                fab.style.transform = "scale(1)";
                            }, 200);
                        } else if (scrollTop <= 200 && isScrolled) {
                            isScrolled = false;
                            fab.style.transform = "scale(0.8)";
                            setTimeout(() => {
                                fab.style.transform = "scale(1)";
                            }, 200);
                        }
                    });

                    // Add pulse animation on hover
                    fab.addEventListener("mouseenter", function () {
                        this.style.animation = "pulse 1s infinite";
                    });

                    fab.addEventListener("mouseleave", function () {
                        this.style.animation = "none";
                    });
                };

                // Initialize all features
                initializeAnimations();
                setTimeout(animateProgressBars, 300);
                setTimeout(updateStats, 600);
                enhanceCourseCards();
                enhanceUserInfo();
                enhanceFAB();

                // Add keyboard shortcuts
                document.addEventListener("keydown", function (e) {
                    // Ctrl/Cmd + H for home
                    if ((e.ctrlKey || e.metaKey) && e.key === "h") {
                        e.preventDefault();
                        window.location.href = "index.html";
                    }

                    // Ctrl/Cmd + L for logout
                    if ((e.ctrlKey || e.metaKey) && e.key === "l") {
                        e.preventDefault();
                        logout();
                    }
                });

                // Add animation styles
                const style = document.createElement("style");
                style.textContent = `
                @keyframes slideInRight {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                @keyframes slideOutRight {
                    from {
                        transform: translateX(0);
                        opacity: 1;
                    }
                    to {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                }
                @keyframes ripple {
                    to {
                        transform: scale(2);
                        opacity: 0;
                    }
                }
                @keyframes pulse {
                    0%, 100% { transform: scale(1); }
                    50% { transform: scale(1.05); }
                }
            `;
                document.head.appendChild(style);

                // Mock data initialization (remove in production)
                console.log("MCSELLER 마이페이지가 로드되었습니다.");

                // Welcome message for new users
                setTimeout(() => {
                    showNotification(
                        "환영합니다! 학습을 시작해보세요 🚀",
                        "success",
                        5000,
                    );
                }, 1500);
            });
        </script>
    </body>
</html>
